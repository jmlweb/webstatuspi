# WebStatusPi Configuration
# Copy this file to config.yaml and customize for your environment
#
# Usage:
#   cp config.example.yaml config.yaml
#   # Edit config.yaml with your URLs and settings

monitor:
  interval: 60  # seconds between check cycles (default: 60)
  ssl_warning_days: 30  # days before expiration to warn about SSL certs (default: 30)

urls:
  - name: "UB_APP"
    url: "https://app.unobravo.com"
    timeout: 5   # request timeout in seconds (default: 10)

  - name: "UB_WEB"
    url: "https://www.unobravo.com"
    timeout: 5

  - name: "JML"
    url: "https://jmlweb.es"

  - name: "PLAYAS"
    url: "https://playasmurcia.com"

  # Content validation examples:

  # Keyword validation - check if response contains a specific string
  # - name: "API_PROD"
  #   url: "https://api.example.com/health"
  #   timeout: 10
  #   keyword: "OK"  # Case-sensitive substring check

  # JSON path validation - check if JSON response has expected value at path
  # - name: "API_STG"
  #   url: "https://staging.example.com/api/status"
  #   timeout: 10
  #   json_path: "status.healthy"  # Checks if data.status.healthy is truthy

  # Custom success codes - override default 200-399 success range
  # - name: "API_CREATE"
  #   url: "https://api.example.com/create"
  #   timeout: 10
  #   success_codes: [200, 201, 202]  # Accept 200, 201, 202 as success
  #
  # - name: "API_LEGACY"
  #   url: "https://legacy.example.com/api"
  #   timeout: 10
  #   success_codes: ["200-299", 400]  # Accept 2xx range and 400

  # Add more URLs as needed:
  # - name: "MY_SERVICE"
  #   url: "http://localhost:3000/health"
  #   timeout: 5

database:
  path: "./data/status.db"  # SQLite database path
  retention_days: 7         # Delete checks older than this

display:
  enabled: true       # Enable OLED display (future feature)
  cycle_interval: 5   # Seconds between URL display cycles

api:
  enabled: true   # Enable JSON API server
  port: 8080      # API server port
  # reset_token: "your-secret-token"  # Optional: token required for DELETE /reset

alerts:
  webhooks:
    # Example: Slack webhook
    - url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
      enabled: true
      on_failure: true    # Send alert when URL goes DOWN
      on_recovery: true   # Send alert when URL comes back UP
      cooldown_seconds: 300  # Minimum time between alerts for same URL (default: 300)

    # Example: Discord webhook
    # - url: "https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK"
    #   enabled: true
    #   on_failure: true
    #   on_recovery: false  # Only alert on failures
    #   cooldown_seconds: 600

    # Example: Generic HTTP webhook (PagerDuty, custom endpoint, etc.)
    # - url: "https://events.pagerduty.com/v2/enqueue"
    #   enabled: true
    #   on_failure: true
    #   on_recovery: true
    #   cooldown_seconds: 300

    # Disabled webhook example (not sent)
    # - url: "https://example.com/webhook"
    #   enabled: false
    #   on_failure: true
    #   on_recovery: true

# Environment variable overrides (optional):
# - WEBSTATUSPI_MONITOR_INTERVAL: Override monitor.interval
# - WEBSTATUSPI_API_PORT: Override api.port
# - WEBSTATUSPI_API_ENABLED: Override api.enabled (true/false)
# - WEBSTATUSPI_DB_PATH: Override database.path
# - WEBSTATUSPI_DB_RETENTION_DAYS: Override database.retention_days
